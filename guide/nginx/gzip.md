---
outline: deep
---

# Gzip å‹ç¼©

::: info ğŸ“– ä¸ºä»€ä¹ˆè¦å¼€å¯ Gzipï¼Ÿ
Gzip å¯ä»¥å‹ç¼©å“åº”å†…å®¹ï¼Œå‡å°‘ä¼ è¾“å¤§å°ï¼Œæ˜¾è‘—æå‡ç½‘ç«™åŠ è½½é€Ÿåº¦ã€‚

| æ–‡ä»¶ç±»å‹ | å‹ç¼©å‰ | å‹ç¼©å | å‹ç¼©ç‡ |
|----------|--------|--------|--------|
| JS æ–‡ä»¶ | 200KB | 50KB | 75% |
| CSS æ–‡ä»¶ | 100KB | 20KB | 80% |
| HTML æ–‡ä»¶ | 50KB | 15KB | 70% |
:::

## ä¸€ã€é…ç½®ç¤ºä¾‹

åœ¨ `http` å—ä¸­æ·»åŠ  Gzip é…ç½®ï¼š

```bash
sudo vim /etc/nginx/nginx.conf
```

```nginx
http {
    # å¯ç”¨ Gzip
    gzip on;

    # æœ€å°å‹ç¼©æ–‡ä»¶å¤§å°ï¼ˆå°äºè¯¥å€¼ä¸å‹ç¼©ï¼‰
    gzip_min_length 1k;

    # å‹ç¼©çº§åˆ« 1-9ï¼Œè¶Šé«˜å‹ç¼©ç‡è¶Šå¤§ï¼ŒCPU æ¶ˆè€—è¶Šé«˜
    gzip_comp_level 6;

    # éœ€è¦å‹ç¼©çš„æ–‡ä»¶ç±»å‹
    gzip_types
        text/plain
        text/css
        text/javascript
        application/json
        application/javascript
        application/xml
        image/svg+xml;

    # æ·»åŠ  Vary å¤´ï¼ˆç¼“å­˜æ”¯æŒï¼‰
    gzip_vary on;

    # ç¦ç”¨ IE6 çš„ Gzip
    gzip_disable "msie6";

    # ... å…¶ä»–é…ç½®
}
```

**å…³é”®é…ç½®è¯´æ˜ï¼š**

| é…ç½®é¡¹ | å»ºè®®å€¼ | è¯´æ˜ |
|--------|--------|------|
| `gzip_comp_level` | 5-6 | å‹ç¼©çº§åˆ«ï¼Œå¤ªé«˜ä¼šå¢åŠ  CPU è´Ÿæ‹… |
| `gzip_min_length` | 1k | å°æ–‡ä»¶ä¸å‹ç¼©ï¼Œé¿å…è´Ÿä¼˜åŒ– |
| `gzip_types` | æ–‡æœ¬ç±» | å›¾ç‰‡/è§†é¢‘å·²å‹ç¼©ï¼Œæ— éœ€å†å‹ |

## äºŒã€ç”Ÿæ•ˆé…ç½®

```bash
# 1. æ£€æŸ¥é…ç½®è¯­æ³•
sudo nginx -t

# 2. é‡æ–°åŠ è½½é…ç½®
sudo nginx -s reload
```

## ä¸‰ã€éªŒè¯å‹ç¼©æ˜¯å¦ç”Ÿæ•ˆ

### æ–¹æ³•ä¸€ï¼šå‘½ä»¤è¡Œ

```bash
curl -H "Accept-Encoding: gzip" -I http://ä½ çš„åŸŸå/
```

å¦‚æœçœ‹åˆ° `Content-Encoding: gzip` åˆ™è¡¨ç¤ºå‹ç¼©ç”Ÿæ•ˆã€‚

### æ–¹æ³•äºŒï¼šæµè§ˆå™¨ DevTools

1. æ‰“å¼€ Chrome DevTools (F12)
2. åˆ‡æ¢åˆ° Network é¢æ¿
3. æŸ¥çœ‹å“åº”å¤´ä¸­æ˜¯å¦æœ‰ `Content-Encoding: gzip`

::: tip ğŸ’¡ æ³¨æ„äº‹é¡¹
- å›¾ç‰‡ã€è§†é¢‘ç­‰å·²å‹ç¼©çš„æ–‡ä»¶æ— éœ€ Gzip
- å°äº 1KB çš„æ–‡ä»¶å‹ç¼©åå¯èƒ½åè€Œæ›´å¤§
- å‹ç¼©çº§åˆ«è®¾ç½®è¿‡é«˜ä¼šå¢åŠ  CPU è´Ÿæ‹…
:::
